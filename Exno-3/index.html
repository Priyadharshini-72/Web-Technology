<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>E-Commerce Checkout</title>

<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(135deg,#fce4ec,#e3f2fd);
}
.container{
max-width:500px;
margin:30px auto;
background:#fff;
padding:25px;
border-radius:15px;
}
.progress{
display:flex;
margin-bottom:20px;
}
.progress div{
flex:1;
height:6px;
margin:0 3px;
background:#f8bbd0;
}
.progress .active{
background:#81d4fa;
}
.step{display:none;}
.step.active{display:block;}
input,select{
width:100%;
padding:10px;
margin-bottom:15px;
}
button{
padding:10px 20px;
border:none;
border-radius:20px;
background:#ba68c8;
color:#fff;
}
.summary{
background:#f3e5f5;
padding:15px;
border-radius:10px;
}
.confirm{
text-align:center;
background:#e8f5e9;
padding:25px;
border-radius:15px;
}
</style>
</head>

<body>

<div class="container">

<div class="progress">
<div class="active"></div><div></div><div></div><div></div>
</div>

<!-- STEP 1 -->
<div class="step active">
<h2>Shipping Information</h2>
<input id="name" placeholder="Name">
<select id="country">
<option value="">Select Country</option>
<option value="IN">India</option>
<option value="US">USA</option>
</select>
<input id="phone" placeholder="Phone Number">
<input id="postal" placeholder="Postal Code">
<button onclick="nextStep(0)">Next</button>
</div>

<!-- STEP 2 -->
<div class="step">
<h2>Billing Details</h2>
<input id="address" placeholder="Billing Address">
<button onclick="prevStep(0)">Back</button>
<button onclick="nextStep(1)">Next</button>
</div>

<!-- STEP 3 -->
<div class="step">
<h2>Payment Method</h2>
<input id="card" placeholder="Card Number">
<input id="expiry" type="month">
<input id="cvv" placeholder="CVV">
<button onclick="prevStep(1)">Back</button>
<button onclick="nextStep(2)">Next</button>
</div>

<!-- STEP 4 -->
<div class="step">
<h2>Order Summary</h2>
<div class="summary" id="summary"></div>
<button onclick="prevStep(2)">Back</button>
<button onclick="confirmOrder()">Confirm</button>
</div>

<!-- STEP 5 -->
<div class="step">
<div class="confirm">
<h2>?? Order Confirmed</h2>
<div class="summary" id="finalSummary"></div>
<p>Thank you for shopping ??</p>
</div>
</div>

</div>

<script>
let steps=document.querySelectorAll(".step");
let progress=document.querySelectorAll(".progress div");

function showStep(i){
steps.forEach(s=>s.classList.remove("active"));
steps[i].classList.add("active");
progress.forEach(p=>p.classList.remove("active"));
for(let j=0;j<=i && j<progress.length;j++)
progress[j].classList.add("active");
}

function nextStep(i){
if(validate(i)){
if(i===2) fillSummary();
showStep(i+1);
}
}
function prevStep(i){ showStep(i); }

/* ---------- VALIDATION ---------- */
function validate(i){

/* SHIPPING */
if(i===0){
if(name.value==""||country.value==""||phone.value==""||postal.value==""){
alert("Fill all shipping fields");
return false;
}

if(country.value==="IN" && !/^[1-9][0-9]{5}$/.test(postal.value)){
alert("Invalid Indian postal code");
return false;
}

if(country.value==="US" && !/^\d{5}$/.test(postal.value)){
alert("Invalid US postal code");
return false;
}

if(!/^\d{10}$/.test(phone.value)){
alert("Invalid phone number");
return false;
}
}

/* BILLING */
if(i===1 && address.value===""){
alert("Enter billing address");
return false;
}

/* PAYMENT */
if(i===2){
if(!luhn(card.value)){
alert("Invalid card number");
return false;
}

let today=new Date();
let exp=new Date(expiry.value);
if(exp<=today){
alert("Card expired");
return false;
}

if(!/^\d{3}$/.test(cvv.value)){
alert("Invalid CVV");
return false;
}
}

return true;
}

/* LUHN ALGORITHM */
function luhn(num){
let sum=0,alt=false;
for(let i=num.length-1;i>=0;i--){
let n=parseInt(num[i]);
if(alt){ n*=2; if(n>9)n-=9; }
sum+=n;
alt=!alt;
}
return sum%10===0;
}

/* SUMMARY */
function fillSummary(){
summary.innerHTML=`
<b>Name:</b> ${name.value}<br>
<b>Country:</b> ${country.value}<br>
<b>Phone:</b> ${phone.value}<br>
<b>Address:</b> ${address.value}<br>
<b>Card:</b> ****${card.value.slice(-4)}
`;
}

function confirmOrder(){
finalSummary.innerHTML=summary.innerHTML;
showStep(4);
}

/* ELEMENTS */
let name=document.getElementById("name");
let country=document.getElementById("country");
let phone=document.getElementById("phone");
let postal=document.getElementById("postal");
let address=document.getElementById("address");
let card=document.getElementById("card");
let expiry=document.getElementById("expiry");
let cvv=document.getElementById("cvv");
let summary=document.getElementById("summary");
let finalSummary=document.getElementById("finalSummary");
</script>

</body>
</html>
